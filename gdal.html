<!DOCTYPE html>
<html lang="en">
<head>
  

  <title>Apache SIS - Bridge with GDAL</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" media="screen" href="http://www.apache.org/css/code.css">
  <link rel="stylesheet" type="text/css" media="screen" href="css/syntax.css">
  <link rel="stylesheet" type="text/css" media="screen" href="css/sis.css">
</head>

<body>

<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="/index.html"> Apache SIS&trade;</a>
      <div class="nav-collapse">
        <ul class="nav">
          <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown">About<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="http://www.apache.org/licenses/">License</a></li>
              <li><a href="mail-lists.html">Mailing Lists</a></li>
              <li><a href="team-list.html">Project Team</a></li>
            </ul>
          </li>
          <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown">Project Documentation<b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="book/index.html">Developer Guide</a></li>
              <li><a href="apidocs/index.html">Online Javadoc</a></li>
              <li><a href="downloads.html">Downloads</a></li>
              <li><a href="source.html">Checkout Sources</a></li>
              <li><a href="epsg.html">EPSG Database</a></li>
              <li><a href="faq.html">FAQ</a></li>
              <li><a href="https://issues.apache.org/jira/browse/SIS">Issue Tracker</a></li>
            </ul>
          </li>
          <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown">ASF <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="http://www.apache.org">The Foundation</a></li>
              <li><a href="http://www.apache.org/foundation/sponsorship.html">Donate</a></li>
              <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
              <li><a href="http://www.apache.org/security/">Security</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>


<div class="container-fluid">
  <div class="row-fluid">
    <div class="span2">
      <div class="apache-con">
        <a href="https://www.apache.org/events/current-event.html">
          <img src="https://www.apache.org/events/current-event-234x60.png" alt="ApacheCon"/>
        </a>
      </div>
      <div class="well sidebar-nav">
        <ul class="nav nav-list">
          <li><a href="index.html">Home</a></li>
          <li><a href="http://www.apache.org/licenses/">License</a></li>
          <li><a href="mail-lists.html">Mailing Lists</a></li>
          <li><a href="team-list.html">Project Team</a></li>
          <li class="nav-header">Project Documentation</li>
          <li><a href="book/index.html">Developer Guide</a></li>
          <li><a href="apidocs/index.html">Online Javadoc</a></li>
          <li><a href="downloads.html">Downloads</a></li>
          <li><a href="source.html">Checkout Sources</a></li>
          <li><a href="epsg.html">EPSG Database</a></li>
          <li><a href="faq.html">FAQ</a></li>
          <li><a href="https://issues.apache.org/jira/browse/SIS">Issue Tracker</a></li>
          <li class="nav-header">ASF</li>
          <li><a href="http://www.apache.org">The Foundation</a></li>
          <li><a href="http://www.apache.org/foundation/sponsorship.html">Donate</a></li>
          <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
          <li><a href="http://www.apache.org/security/">Security</a></li>
        </ul>
      </div>
    </div>
    <div class="span10">
      <section id="content" class="row">
        <article class="span12">
          <img src="img/logo.png" class="sis-logo" align="left"/>
          <p class="page-title">Bridge with GDAL</p>
          
          <style type="text/css">
               
               
              .headerlink, .elementid-permalink {
                  visibility: hidden;
              }
              h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }
          </style>
          
	<p>While Apache SIS provides its own map projection engine, some applications may want to also use the Proj.4 library.
One reason may be to use map projection methods not yet supported by Apache SIS,
or for getting the exact same numerical results than Proj.4.
The two libraries can coexist and can be used through the same API,
provided that prerequisites are meet.</p>
<p><strong>NOTE: this module has been temporarily retired in Apache SIS 1.0. It needs to be upgraded to Proj version 5 and 6 before new release.</strong></p>
<nav id="TableOfContents">
  <ul>
    <li><a href="#prerequisites">Prerequisites   </a></li>
    <li><a href="#usage">Usage   </a></li>
    <li><a href="#limitations">Limitations   </a></li>
  </ul>
</nav>
<h1 id="prerequisites">Prerequisites   </h1>
<p>Proj.4 needs to be pre-installed; there is no copy embedded in Apache SIS.
Proj.4 can be installed by package managers on most Linux distributions,
or with tools like MacPorts on MacOS
(Windows is not yet supported â€“ see <a href="#limitations">limitations</a>).
In addition, the <code>sis-gdal</code> module must be present on the classpath.
Maven projects can use the following dependency in their <code>pom.xml</code> file:</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependencies&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apache.sis.storage<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>sis-gdal<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.8<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span></code></pre></div>
<h1 id="usage">Usage   </h1>
<p>For instantiating a coordinate reference system (CRS) backed by Proj.4:</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">CoordinateReferenceSystem</span> <span class="n">crs</span> <span class="o">=</span> <span class="n">CRS</span><span class="o">.</span><span class="na">forCode</span><span class="o">(</span><span class="s">&#34;Proj4::+init=epsg:4326&#34;</span><span class="o">);</span></code></pre></div>
<p>Everything after <code>&quot;PROJ4::&quot;</code> is forwarded as-is to the Proj.4 library.
Note that despite the <code>&quot;epsg&quot;</code> part in above definition string, the CRS created by above method call is <strong>not</strong>
conform to EPSG:4326 authoritative definition. The string should rather be understood as a Proj.4-specific code.
Proj.4 definitions may differ from authoritative definitions in axis order, axis directions or units of measurement.
To get the authoritative definition, use <code>CRS.forCode(&quot;EPSG::4326&quot;)</code> instead.</p>
<p>For creating a coordinate operation backed by Proj.4, there is nothing special to do;
we can invoke the same method regardless if the CRS are backed by Proj.4 or Apache SIS.
The following code will create a transform backed by Proj.4 if <em>both</em> <code>sourceCRS</code> and <code>targetCRS</code>
were created with <code>CRS.forCode(&quot;Proj4::...&quot;)</code> calls.
Note however that <code>CoordinateOperation</code> backed by Proj.4 does not provide metadata about accuracy or domain of validity.</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">CoordinateOperation</span>  <span class="n">op</span> <span class="o">=</span> <span class="n">CRS</span><span class="o">.</span><span class="na">findOperation</span><span class="o">(</span><span class="n">sourceCRS</span><span class="o">,</span> <span class="n">targetCRS</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
<span class="n">MathTransform</span>        <span class="n">mt</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="na">getMathTransform</span><span class="o">();</span>
<span class="n">DirectPosition</span> <span class="n">sourcePt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DirectPosition2D</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">);</span>
<span class="n">DirectPosition</span> <span class="n">targetPt</span> <span class="o">=</span> <span class="n">mt</span><span class="o">.</span><span class="na">transform</span><span class="o">(</span><span class="n">sourcePt</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span></code></pre></div>
<p>To verify if a <code>MathTransform</code> instance is implemented by Proj.4 or by Apache SIS,
one can look at the <em>Well Known Text</em> (WKT) representation as given by <code>System.out.println(mt)</code>.
If the transform is backed by Apache SIS, the output may show any of the parameters listed
in the <a href="tables/CoordinateOperationMethods.html">coordinate operation methods table</a>.
But if the transform is backed by Proj.4, then the transform will always be described
by the <code>&quot;pj_transform&quot;</code> method with exactly two parameters: <code>&quot;srcdefn&quot;</code> and <code>&quot;dstdefn&quot;</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">PARAM_MT[&#34;pj_transform&#34;,
  PARAMETER[&#34;srcdefn&#34;, &#34;+proj=...&#34;],
  PARAMETER[&#34;dstdefn&#34;, &#34;+proj=...&#34;]]</code></pre></div>
<p>See the <a href="apidocs/org/apache/sis/storage/gdal/package-summary.html">Javadoc</a> for more information.</p>
<h1 id="limitations">Limitations   </h1>
<p>Current Apache SIS version can create CRS backed by Proj.4 only when SIS can map Proj.4 parameters to EPSG parameters.
For example the Proj.4 <code>+x_0=</code> parameter is often (but not always) mapped to EPSG <em>False easting</em> parameter.
Future SIS versions may relax the requirement for such mapping.</p>
<p>Current Apache SIS version supports only Linux and MacOS platforms.
A future version will add Windows support.</p>


        </article>
      </section>
    </div>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>
      Copyright &copy; 2013-2021 The Apache Software Foundation, Licensed under the
      <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.<br/>
      Apache SIS, Apache, the Apache feather logo are trademarks of The Apache Software Foundation.
    </p>
  </div>
</footer>

<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>

<script type="text/javascript">
const pathname = window.location.pathname
const current_path = pathname.substring(1, pathname.length)
const link = $('a[href="' + current_path + '"]')
if (link !== undefined) {
  link.parents('li,ul').addClass('active')
}
</script>

</body>
</html>
