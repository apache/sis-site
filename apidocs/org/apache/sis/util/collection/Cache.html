<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Thu Feb 05 20:03:42 CET 2015 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Cache (Apache SIS 0.5 API)</title>
<meta name="date" content="2015-02-05">
<meta name="keywords" content="org.apache.sis.util.collection.Cache class">
<meta name="keywords" content="clear()">
<meta name="keywords" content="isEmpty()">
<meta name="keywords" content="size()">
<meta name="keywords" content="containsKey()">
<meta name="keywords" content="put()">
<meta name="keywords" content="remove()">
<meta name="keywords" content="get()">
<meta name="keywords" content="getOrCreate()">
<meta name="keywords" content="peek()">
<meta name="keywords" content="lock()">
<meta name="keywords" content="keySet()">
<meta name="keywords" content="entrySet()">
<meta name="keywords" content="isKeyCollisionAllowed()">
<meta name="keywords" content="setKeyCollisionAllowed()">
<meta name="keywords" content="cost()">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Cache (Apache SIS 0.5 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Cache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/sis/util/collection/BackingStoreException.html" title="class in org.apache.sis.util.collection"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/sis/util/collection/Cache.Handler.html" title="interface in org.apache.sis.util.collection"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/sis/util/collection/Cache.html" target="_top">Frames</a></li>
<li><a href="Cache.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.sis.util.collection</div>
<h2 title="Class Cache" class="title">Class Cache&lt;K,V&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></li>
<li>
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a>&lt;K,V&gt;</li>
<li>
<ul class="inheritance">
<li>Cache&lt;K,V&gt;</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>K</code> - The type of key objects.</dd>
<dd><code>V</code> - The type of value objects.</dd>
</dl>
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;K,V&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">Cache&lt;K,V&gt;</span>
extends <a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a>&lt;K,V&gt;</pre>
<div class="block">A concurrent cache mechanism. This implementation is thread-safe and supports concurrency.
 A cache entry can be locked when an object is in process of being created. The steps
 are as below:

 <ol>
   <li>Check if the value is already available in the map.
       If it is, return it immediately and we are done.</li>
   <li>Otherwise, get a lock and check again if the value is already available in the map
       (because the value could have been computed by an other thread between step 1 and
       the obtention of the lock). If it is, release the lock and we are done.</li>
   <li>Otherwise compute the value, store the result and release the lock.</li>
 </ol>

 The easiest way (except for exception handling) to use this class is to prepare a
 <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent"><code>Callable</code></a> statement to be executed only if the object is not in the cache,
 and to invoke the <a href="../../../../../org/apache/sis/util/collection/Cache.html#getOrCreate-K-java.util.concurrent.Callable-"><code>getOrCreate</code></a> method. Example:

 <blockquote><pre><font color="green">private</font> <font color="green">final</font> Cache&lt;String,MyObject&gt; cache = <font color="green">new</font> Cache&lt;String,MyObject&gt;();

<font color="green">public</font> MyObject <b>getMyObject</b>(<font color="green">final</font> String key) <font color="green">throws</font> MyCheckedException {
    <font color="green">try</font> {
        <font color="green">return</font> cache.<b>getOrCreate</b>(key, <font color="green">new</font> Callable&lt;MyObject&gt;() {
            MyObject <b>call</b>() <font color="green">throws</font> FactoryException {
                <font color="green">return</font> <b>createMyObject</b>(key);
            }
        });
    } <font color="green">catch</font> (MyCheckedException e) {
        <font color="green">throw</font> e;
    } <font color="green">catch</font> (RuntimeException e) {
        <font color="green">throw</font> e;
    } <font color="green">catch</font> (Exception e) {
        <font color="green">throw</font> <font color="green">new</font> <b>UndeclaredThrowableException</b>(e);
    }
}</pre></blockquote>

 An alternative is to perform explicitly all the steps enumerated above. This alternative
 avoid the creation of a temporary <code>Callable</code> statement which may never be executed,
 and avoid the exception handling due to the <code>throws Exception</code> clause. Note that the
 call to <a href="../../../../../org/apache/sis/util/collection/Cache.Handler.html#putAndUnlock-V-"><code>putAndUnlock</code></a> <strong>must</strong> be in the <code>finally</code>
 block of a <code>try</code> block beginning immediately after the call to <a href="../../../../../org/apache/sis/util/collection/Cache.html#lock-K-"><code>lock</code></a>,
 no matter what the result of the computation is (including <code>null</code>).

 <blockquote><pre><font color="green">private</font> <font color="green">final</font> Cache&lt;String,MyObject&gt; cache = <font color="green">new</font> Cache&lt;String,MyObject&gt;();

<font color="green">public</font> MyObject <b>getMyObject</b>(<font color="green">final</font> String key) <font color="green">throws</font> MyCheckedException {
    MyObject value = cache.<b>peek</b>(key);
    <font color="green">if</font> (value == <font color="green">null</font>) {
        <font color="green">final</font> Cache.Handler&lt;MyObject&gt; handler = cache.<b>lock</b>(key);
        <font color="green">try</font> {
            value = handler.<b>peek</b>();
            <font color="green">if</font> (value == <font color="green">null</font>) {
                value = <b>createMyObject</b>(key);
            }
        } <font color="green">finally</font> {
            handler.<b>putAndUnlock</b>(value);
        }
    }
    <font color="green">return</font> value;
}</pre></blockquote>


 
<h5>Eviction of eldest values</h5>

 <ul>
   <li>The <cite>cost</cite> of a value is the value returned by <a href="../../../../../org/apache/sis/util/collection/Cache.html#cost-V-"><code>cost(V)</code></a>. The default
       implementation returns 1 in all cases, but subclasses can override this method for
       more elaborated cost computation.</li>
   <li>The <cite>total cost</cite> is the sum of the cost of all values held by strong
       reference in this cache. The total cost does not include the cost of values held
       by <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/ref/Reference.html?is-external=true" title="class or interface in java.lang.ref">weak or soft reference</a>.</li>
   <li>The <cite>cost limit</cite> is the maximal value allowed for the total cost. If
       the total cost exceed this value, then strong references to the eldest values are
       replaced by <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/ref/Reference.html?is-external=true" title="class or interface in java.lang.ref">weak or soft references</a> until the total cost
       become equals or lower than the cost limit.</li>
 </ul>

 The total cost is given at construction time. If the <a href="../../../../../org/apache/sis/util/collection/Cache.html#cost-V-"><code>cost(V)</code></a> method has not been
 overridden, then the total cost is the maximal amount of values to keep by strong references.


 
<h5>Circular dependencies</h5>

 This implementation assumes that there is no circular dependencies (or cyclic graph) between
 the values in the cache. For example if creating <var>A</var> implies creating <var>B</var>,
 then creating <var>B</var> is not allowed to implies (directly or indirectly) the creation of
 <var>A</var>. If this rule is not meet, deadlock may occur randomly.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.3</dd>

<p><font size="-1">Defined in the <code>sis-utility</code> module</font></p>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.Handler.html" title="interface in org.apache.sis.util.collection">Cache.Handler</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.Handler.html" title="type parameter in Cache.Handler">V</a>&gt;</span></code>
<div class="block">The handler returned by <a href="../../../../../org/apache/sis/util/collection/Cache.html#lock-K-"><code>lock(K)</code></a>, to be used for unlocking and storing the
 result.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.java.util.AbstractMap">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.SimpleEntry.html?is-external=true" title="class or interface in java.util">AbstractMap.SimpleEntry</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.SimpleEntry.html?is-external=true" title="class or interface in java.util">K</a>,<a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.SimpleEntry.html?is-external=true" title="class or interface in java.util">V</a>&gt;, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.SimpleImmutableEntry.html?is-external=true" title="class or interface in java.util">AbstractMap.SimpleImmutableEntry</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.SimpleImmutableEntry.html?is-external=true" title="class or interface in java.util">K</a>,<a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.SimpleImmutableEntry.html?is-external=true" title="class or interface in java.util">V</a>&gt;</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.java.util.Map">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from interface&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html?is-external=true" title="class or interface in java.util">Map.Entry</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html?is-external=true" title="class or interface in java.util">K</a>,<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html?is-external=true" title="class or interface in java.util">V</a>&gt;</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#Cache--">Cache</a></span>()</code>
<div class="block">Creates a new cache with a default initial capacity and cost limit of 100.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#Cache-int-long-boolean-">Cache</a></span>(int&nbsp;initialCapacity,
     long&nbsp;costLimit,
     boolean&nbsp;soft)</code>
<div class="block">Creates a new cache using the given initial capacity and cost limit.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#clear--">clear</a></span>()</code>
<div class="block">Clears the content of this cache.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#containsKey-java.lang.Object-">containsKey</a></span>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</code>
<div class="block">Returns <code>true</code> if this map contains the specified key.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#cost-V-">cost</a></span>(<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&nbsp;value)</code>
<div class="block">Computes an estimation of the cost of the given value.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html?is-external=true" title="class or interface in java.util">Map.Entry</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#entrySet--">entrySet</a></span>()</code>
<div class="block">Returns the set of entries in this cache.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#get-java.lang.Object-">get</a></span>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</code>
<div class="block">Returns the value associated to the given key in the cache.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#getOrCreate-K-java.util.concurrent.Callable-">getOrCreate</a></span>(<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>&nbsp;key,
           <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;? extends <a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;&nbsp;creator)</code>
<div class="block">Returns the value for the given key.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#isEmpty--">isEmpty</a></span>()</code>
<div class="block">Returns <code>true</code> if this cache is empty.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#isKeyCollisionAllowed--">isKeyCollisionAllowed</a></span>()</code>
<div class="block">Returns <code>true</code> if different values may be assigned to the same key.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#keySet--">keySet</a></span>()</code>
<div class="block">Returns the set of keys in this cache.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/sis/util/collection/Cache.Handler.html" title="interface in org.apache.sis.util.collection">Cache.Handler</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#lock-K-">lock</a></span>(<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>&nbsp;key)</code>
<div class="block">Gets a lock for the entry at the given key and returns a handler to be used by the caller
 for unlocking and storing the result.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#peek-K-">peek</a></span>(<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>&nbsp;key)</code>
<div class="block">If a value is already cached for the given key, returns it.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#put-K-V-">put</a></span>(<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>&nbsp;key,
   <a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&nbsp;value)</code>
<div class="block">Puts the given value in cache.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#remove-java.lang.Object-">remove</a></span>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</code>
<div class="block">Removes the value associated to the given key in the cache.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#setKeyCollisionAllowed-boolean-">setKeyCollisionAllowed</a></span>(boolean&nbsp;allowed)</code>
<div class="block">If set to <code>true</code>, different values may be assigned to the same key.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/sis/util/collection/Cache.html#size--">size</a></span>()</code>
<div class="block">Returns the number of elements in this cache.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.AbstractMap">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#clone--" title="class or interface in java.util">clone</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#containsValue-java.lang.Object-" title="class or interface in java.util">containsValue</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.util">equals</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#hashCode--" title="class or interface in java.util">hashCode</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#putAll-java.util.Map-" title="class or interface in java.util">putAll</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#toString--" title="class or interface in java.util">toString</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#values--" title="class or interface in java.util">values</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.Map">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#compute-K-java.util.function.BiFunction-" title="class or interface in java.util">compute</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#computeIfAbsent-K-java.util.function.Function-" title="class or interface in java.util">computeIfAbsent</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#computeIfPresent-K-java.util.function.BiFunction-" title="class or interface in java.util">computeIfPresent</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#forEach-java.util.function.BiConsumer-" title="class or interface in java.util">forEach</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#getOrDefault-java.lang.Object-V-" title="class or interface in java.util">getOrDefault</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#merge-K-V-java.util.function.BiFunction-" title="class or interface in java.util">merge</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#putIfAbsent-K-V-" title="class or interface in java.util">putIfAbsent</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#remove-java.lang.Object-java.lang.Object-" title="class or interface in java.util">remove</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#replace-K-V-" title="class or interface in java.util">replace</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#replace-K-V-V-" title="class or interface in java.util">replace</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#replaceAll-java.util.function.BiFunction-" title="class or interface in java.util">replaceAll</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Cache--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Cache</h4>
<pre>public&nbsp;Cache()</pre>
<div class="block">Creates a new cache with a default initial capacity and cost limit of 100.
 The oldest objects will be hold by <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref">weak references</a>.</div>
</li>
</ul>
<a name="Cache-int-long-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Cache</h4>
<pre>public&nbsp;Cache(int&nbsp;initialCapacity,
             long&nbsp;costLimit,
             boolean&nbsp;soft)</pre>
<div class="block">Creates a new cache using the given initial capacity and cost limit. The initial capacity
 is the expected number of values to be stored in this cache. More values are allowed, but
 a little bit of CPU time may be saved if the expected capacity is known before the cache
 is created.

 <p>The <cite>cost limit</cite> is the maximal value of the <cite>total cost</cite> (the sum
 of the <a href="../../../../../org/apache/sis/util/collection/Cache.html#cost-V-">cost</a> of all values) before to replace eldest strong references by
 <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/ref/Reference.html?is-external=true" title="class or interface in java.lang.ref">weak or soft references</a>.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>initialCapacity</code> - the initial capacity.</dd>
<dd><code>costLimit</code> - The maximum number of objects to keep by strong reference.</dd>
<dd><code>soft</code> - If <code>true</code>, use <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/ref/SoftReference.html?is-external=true" title="class or interface in java.lang.ref"><code>SoftReference</code></a> instead of <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref"><code>WeakReference</code></a>.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="clear--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;clear()</pre>
<div class="block">Clears the content of this cache.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#clear--" title="class or interface in java.util">clear</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#clear--" title="class or interface in java.util">clear</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="isEmpty--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEmpty</h4>
<pre>public&nbsp;boolean&nbsp;isEmpty()</pre>
<div class="block">Returns <code>true</code> if this cache is empty.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#isEmpty--" title="class or interface in java.util">isEmpty</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#isEmpty--" title="class or interface in java.util">isEmpty</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if this cache do not contains any element.</dd>
</dl>
</li>
</ul>
<a name="size--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;int&nbsp;size()</pre>
<div class="block">Returns the number of elements in this cache. The count includes values keep by strong,
 <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/ref/SoftReference.html?is-external=true" title="class or interface in java.lang.ref">soft</a> or <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref">weak</a> references, and the
 values under computation at the time this method is invoked.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#size--" title="class or interface in java.util">size</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#size--" title="class or interface in java.util">size</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of elements currently cached.</dd>
</dl>
</li>
</ul>
<a name="containsKey-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsKey</h4>
<pre>public&nbsp;boolean&nbsp;containsKey(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</pre>
<div class="block">Returns <code>true</code> if this map contains the specified key.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#containsKey-java.lang.Object-" title="class or interface in java.util">containsKey</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#containsKey-java.lang.Object-" title="class or interface in java.util">containsKey</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - The key to check for existence.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the given key still exist in this cache.</dd>
</dl>
</li>
</ul>
<a name="put-java.lang.Object-java.lang.Object-">
<!--   -->
</a><a name="put-K-V-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>put</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&nbsp;put(<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>&nbsp;key,
             <a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&nbsp;value)</pre>
<div class="block">Puts the given value in cache.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#put-K-V-" title="class or interface in java.util">put</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#put-K-V-" title="class or interface in java.util">put</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - The key for which to set a value.</dd>
<dd><code>value</code> - The value to store.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value previously stored at the given key, or <code>null</code> if none.</dd>
</dl>
</li>
</ul>
<a name="remove-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&nbsp;remove(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</pre>
<div class="block">Removes the value associated to the given key in the cache.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#remove-java.lang.Object-" title="class or interface in java.util">remove</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#remove-java.lang.Object-" title="class or interface in java.util">remove</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - The key of the value to removed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value that were associated to the given key, or <code>null</code> if none.</dd>
</dl>
</li>
</ul>
<a name="get-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&nbsp;get(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</pre>
<div class="block">Returns the value associated to the given key in the cache. This method is similar to
 <a href="../../../../../org/apache/sis/util/collection/Cache.html#peek-K-"><code>peek(K)</code></a> except that it blocks if the value is currently under computation in an
 other thread.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#get-java.lang.Object-" title="class or interface in java.util">get</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#get-java.lang.Object-" title="class or interface in java.util">get</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - The key of the value to get.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value associated to the given key, or <code>null</code> if none.</dd>
</dl>
</li>
</ul>
<a name="getOrCreate-java.lang.Object-java.util.concurrent.Callable-">
<!--   -->
</a><a name="getOrCreate-K-java.util.concurrent.Callable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrCreate</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&nbsp;getOrCreate(<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>&nbsp;key,
                     <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;? extends <a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;&nbsp;creator)
              throws <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Returns the value for the given key. If a value already exists in the cache, then it
 is returned immediately. Otherwise the <code>creator.call()</code> method is invoked and
 its result is saved in this cache for future reuse.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - The key for which to get the cached or created value.</dd>
<dd><code>creator</code> - A method for creating a value, to be invoked only if no value are
         cached for the given key.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value for the given key, which may have been created as a result of this
         method call.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - If an exception occurred during the execution of <code>creator.call()</code>.</dd>
</dl>
</li>
</ul>
<a name="peek-java.lang.Object-">
<!--   -->
</a><a name="peek-K-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>peek</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&nbsp;peek(<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>&nbsp;key)</pre>
<div class="block">If a value is already cached for the given key, returns it. Otherwise returns <code>null</code>.
 This method is similar to <a href="../../../../../org/apache/sis/util/collection/Cache.html#get-java.lang.Object-"><code>get(Object)</code></a> except that it doesn't block if the value is
 in process of being computed in an other thread; it returns <code>null</code> in such case.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - The key for which to get the cached value.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The cached value for the given key, or <code>null</code> if there is none.</dd>
</dl>
</li>
</ul>
<a name="lock-java.lang.Object-">
<!--   -->
</a><a name="lock-K-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/sis/util/collection/Cache.Handler.html" title="interface in org.apache.sis.util.collection">Cache.Handler</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;&nbsp;lock(<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>&nbsp;key)</pre>
<div class="block">Gets a lock for the entry at the given key and returns a handler to be used by the caller
 for unlocking and storing the result. This method <strong>must</strong> be used together
 with a <a href="../../../../../org/apache/sis/util/collection/Cache.Handler.html#putAndUnlock-V-"><code>putAndUnlock</code></a> call in <code>try</code>  <code>catch</code>
 blocks as in the example below:

 <blockquote><pre>Cache.Handler handler = cache.<b>lock</b>();
<font color="green">try</font> {
    <i><font color="gray">// Compute the result...</font></i>
} <font color="green">finally</font> {
    handler.<b>putAndUnlock</b>(result);
}</pre></blockquote></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - The key for the entry to lock.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A handler to use for unlocking and storing the result.</dd>
</dl>
</li>
</ul>
<a name="keySet--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keySet</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>&gt;&nbsp;keySet()</pre>
<div class="block">Returns the set of keys in this cache. The returned set is subjects to the same caution
 than the ones documented in the <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true#keySet--" title="class or interface in java.util.concurrent"><code>ConcurrentHashMap.keySet()</code></a> method.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#keySet--" title="class or interface in java.util">keySet</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#keySet--" title="class or interface in java.util">keySet</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The set of keys in this cache.</dd>
</dl>
</li>
</ul>
<a name="entrySet--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entrySet</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html?is-external=true" title="class or interface in java.util">Map.Entry</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;&gt;&nbsp;entrySet()</pre>
<div class="block">Returns the set of entries in this cache. The returned set is subjects to the same caution
 than the ones documented in the <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true#entrySet--" title="class or interface in java.util.concurrent"><code>ConcurrentHashMap.entrySet()</code></a> method, except that
 it doesn't support removal of elements (including through the <a href="http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html?is-external=true#remove--" title="class or interface in java.util"><code>Iterator.remove()</code></a>
 method call).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true#entrySet--" title="class or interface in java.util">entrySet</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true#entrySet--" title="class or interface in java.util">entrySet</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/AbstractMap.html?is-external=true" title="class or interface in java.util">AbstractMap</a>&lt;<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">K</a>,<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&gt;</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A view of the entries contained in this map.</dd>
</dl>
</li>
</ul>
<a name="isKeyCollisionAllowed--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isKeyCollisionAllowed</h4>
<pre>public&nbsp;boolean&nbsp;isKeyCollisionAllowed()</pre>
<div class="block">Returns <code>true</code> if different values may be assigned to the same key.
 The default value is <code>false</code>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if key collisions are allowed.</dd>
</dl>
</li>
</ul>
<a name="setKeyCollisionAllowed-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setKeyCollisionAllowed</h4>
<pre>public&nbsp;void&nbsp;setKeyCollisionAllowed(boolean&nbsp;allowed)</pre>
<div class="block">If set to <code>true</code>, different values may be assigned to the same key. This is usually an
 error, so the default <code>Cache</code> behavior is to thrown an <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a>
 in such cases, typically when <a href="../../../../../org/apache/sis/util/collection/Cache.Handler.html#putAndUnlock-V-"><code>Cache.Handler.putAndUnlock(Object)</code></a> is invoked. However in
 some cases we may want to relax this check. For example the EPSG database sometime assigns
 the same key to different kind of objects.

 <p>If key collisions are allowed and two threads invoke <a href="../../../../../org/apache/sis/util/collection/Cache.html#lock-K-"><code>lock(Object)</code></a> concurrently
 for the same key, then the value to be stored in the map will be the one computed by the
 first thread who got the lock. The value computed by any other concurrent thread will be
 ignored by this <code>Cache</code> class. However those threads still return their computed
 values to their callers.</p>

 <p>This property can also be set in order to allow some recursivity. If during the creation
 of an object, the program asks to this <code>Cache</code> for the same object (using the same key),
 then the default <code>Cache</code> implementation will consider this situation as a key collision
 unless this property has been set to <code>true</code>.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>allowed</code> - <code>true</code> if key collisions should be allowed.</dd>
</dl>
</li>
</ul>
<a name="cost-java.lang.Object-">
<!--   -->
</a><a name="cost-V-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>cost</h4>
<pre>protected&nbsp;int&nbsp;cost(<a href="../../../../../org/apache/sis/util/collection/Cache.html" title="type parameter in Cache">V</a>&nbsp;value)</pre>
<div class="block">Computes an estimation of the cost of the given value. The default implementation returns 1
 in all cases. Subclasses should override this method if they have some easy way to measure
 the relative cost of value objects.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>value</code> - The object for which to get an estimation of its cost.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The estimated cost of the given object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/Instrumentation.html?is-external=true#getObjectSize-java.lang.Object-" title="class or interface in java.lang.instrument"><code>Instrumentation.getObjectSize(Object)</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Cache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/sis/util/collection/BackingStoreException.html" title="class in org.apache.sis.util.collection"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../org/apache/sis/util/collection/Cache.Handler.html" title="interface in org.apache.sis.util.collection"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/sis/util/collection/Cache.html" target="_top">Frames</a></li>
<li><a href="Cache.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2010&#x2013;2015 <a href="http://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
