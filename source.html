<!DOCTYPE html>
<html lang="en">

  <head>
    <title>Apache SIS - Checkout source code</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="./sis.css">
    <link rel="stylesheet" type="text/css" media="screen" href="./syntax.css">
  </head>
  <body>
    <div class="topbar">
      <a class="topbar-brand" href="./index.html">Apache SIS™</a>
      <ul class="topbar-items">
        <li>
          <a href="https://www.apache.org/events/current-event.html">
             <img class="apache-con" src="https://www.apache.org/events/current-event-234x60.png" alt="ApacheCon"/>
          </a>
        </li>
      </ul>
    </div>
    <div class="main-section">
      <nav class="left-bar">
        <ul class="nav-pills">
          <li><a class="nav-link  inactive " href="./index.html">Home</a></li>
          <li><a class="nav-link  inactive " href="./about.html">About</a></li>
          <li><a class="nav-link  inactive " href="./downloads.html">Downloads</a></li>
          <li><a class="nav-link  inactive " href="./howto.html">How to…</a></li>
          <li><a class="nav-link  inactive " href="./standards.html">Standards</a></li>
          <li><a class="nav-link  inactive " href="./formats.html">Data formats</a></li>
          <li><a class="nav-link  inactive " href="./epsg.html">EPSG Database</a></li>
          <li><a class="nav-link  inactive " href="./javafx.html">Application (demo)</a></li>
          <li><a class="nav-link  inactive " href="./documentation.html">Documentation</a></li>
        </ul>
      </nav>
      <div class="main-content">
        <main class="container">
          <article>
            <img src="./images/logo.png" class="sis-logo" align="left"/>
            <p class="page-title">Checkout source code</p>

  <p>Apache <abbr title="Spatial Information System">SIS</abbr> source code is maintained using <a href="https://git-scm.com">Git</a> version control,
completed by optional data maintained using <a href="https://subversion.apache.org">Subversion</a> version control.
Optional data include in particular the <a href="./epsg.html">EPSG geodetic dataset</a>,
which is subject to licensing terms different than Apache ones.
This page describes two ways to checkout Apache <abbr title="Spatial Information System">SIS</abbr> source code:</p>
<ul>
<li>A basic checkout with only the main repository, the most stable branch, and no configuration requirement.</li>
<li>A more advanced configuration for active <abbr title="Spatial Information System">SIS</abbr> developments, using uncommitted (for now) API
and including optional data for more extensive tests.</li>
</ul>
<p>It is possible to start with the basic checkout and migrate to the advanced configuration later,
or to cherry-pick only the interesting parts of the advanced configuration.</p>
<nav id="TableOfContents">
  <ul>
    <li><a href="#basic">Basic installation   </a></li>
    <li><a href="#advanced">Advanced installation   </a>
      <ul>
        <li><a href="#data">Create data directory   </a></li>
        <li><a href="#non-free">Checkout non-free data   </a></li>
        <li><a href="#postgres">Configure PostgreSQL   </a></li>
        <li><a href="#tests">Running extensive tests   </a></li>
        <li><a href="#branches">Switch to development branch   </a></li>
      </ul>
    </li>
    <li><a href="#resources">Managing resources  </a></li>
    <li><a href="#history">History   </a></li>
  </ul>
</nav>
<h1 id="basic">Basic installation   </h1>
<p>Create an empty directory for the Apache <abbr title="Spatial Information System">SIS</abbr> project.
We use <code>SIS</code> directory name in this page, but that name can be anything.
Replace that name in the shell commands below if another name is used.
The Apache <abbr title="Spatial Information System">SIS</abbr> source code can be cloned in that directory as below.
This page uses Unix commands.
Lines starting with <code>#</code> are comments and can be ignored.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir SIS
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> SIS
</span></span><span class="line"><span class="cl"><span class="c1"># Remember this directory for use in other shell commands on this page:</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">SIS_ROOT_DIR</span><span class="o">=</span><span class="nv">$PWD</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">git clone https://gitbox.apache.org/repos/asf/sis main
</span></span><span class="line"><span class="cl"><span class="c1"># Alternatively, GitHub mirror can also be used:</span>
</span></span><span class="line"><span class="cl"><span class="c1"># git clone https://github.com/apache/sis main</span>
</span></span></code></pre></div><p>If JavaFX is available on the local machine,
its JAR files location can be specified as below.
The JavaFX application is excluded by default because it depends on
the <a href="https://openjfx.io/">JavaFX platform</a> which is distributed under GPL with Classpath Exception license
(note that the Apache <abbr title="Spatial Information System">SIS</abbr> module using JavaFX stay under Apache 2 licence).</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Edit the following path as needed.</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PATH_TO_FX</span><span class="o">=</span>/usr/lib/jvm/openjfx
</span></span></code></pre></div><p>Likewise, the <a href="./epsg.html">EPSG geodetic dataset</a> is excluded by default for licensing reasons.
Those data are optional and can be added as instructed in the <a href="./source.html#non-free">Checkout non-free data</a> section.
Then, Apache <abbr title="Spatial Information System">SIS</abbr> can be built as below:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> <span class="nv">$SIS_ROOT_DIR</span>/main
</span></span><span class="line"><span class="cl">gradle assemble
</span></span><span class="line"><span class="cl">gradle publishToMavenLocal      <span class="c1"># If usage with Maven projects is desired.</span>
</span></span></code></pre></div><p>Outputs will be located in the following sub-directories:</p>
<ul>
<li><code>endorsed/build/libs/</code>   for the JAR files of the core library and its dependencies.</li>
<li><code>optional/build/libs/</code>   for the JAR files of modules requiring optional dependencies.</li>
<li><code>incubator/build/libs/</code>  for the JAR files of modules that are not yet part of releases.</li>
<li><code>endorsed/build/bundle/</code> for the OXT add-in for Open/LibreOffice Calc.</li>
<li><code>optional/build/bundle/</code> for the JavaFX application if optional dependencies were specified.</li>
</ul>
<p>The remaining of this page describes optional configurations for more advanced developments.</p>
<h1 id="advanced">Advanced installation   </h1>
<p>This section assumes that the above-described basic checkout has been done.
All subsections below are optional, but the &ldquo;Create data directory&rdquo; one
is recommended because some other subsections depend on it.</p>
<h2 id="data">Create data directory   </h2>
<p>Apache <abbr title="Spatial Information System">SIS</abbr> needs a directory where to store database, datum shift files and other optional data.
That directory is specified by the <code>SIS_DATA</code> environment variable and can be located anywhere.
A convenient location is a subdirectory of the <code>SIS</code> directory created in the &ldquo;basic checkout&rdquo; section.
For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">SIS_DATA</span><span class="o">=</span><span class="nv">$SIS_ROOT_DIR</span>/Data
</span></span><span class="line"><span class="cl">mkdir <span class="nv">$SIS_DATA</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># For making that environment variable available in future shell sessions,</span>
</span></span><span class="line"><span class="cl"><span class="c1"># the output of following command can be added to .bash_profile or .bashrc</span>
</span></span><span class="line"><span class="cl"><span class="c1"># file in user home directory.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nb">export</span> <span class="nv">SIS_DATA</span><span class="o">=</span><span class="nv">$SIS_DATA</span>
</span></span></code></pre></div><h2 id="non-free">Checkout non-free data   </h2>
<p>The EPSG geodetic dataset is recommended for operations related to Coordinate Reference Systems.
Without the EPSG database, only a <a href="apidocs/org.apache.sis.referencing/org/apache/sis/referencing/CRS.html#forCode%28java.lang.String%29">small subset</a>
of coordinate reference systems can be created from EPSG codes.
The EPSG data can be used with one of the <a href="./epsg.html">existing artifacts</a>.
But in order to build those optional artifacts from the sources, the following instructions must be executed.
Before to continue, make sure to agree with <a href="https://epsg.org/terms-of-use.html">EPSG terms of use</a>.
Then, the following commands can be executed with <code>SIS</code> as the current directory:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> <span class="nv">$SIS_ROOT_DIR</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Executing this command imply agreement with EPSG terms of use.</span>
</span></span><span class="line"><span class="cl">svn checkout https://svn.apache.org/repos/asf/sis/data/non-free/
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> non-free/EPSG
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">EPSG_DIR</span><span class="o">=</span><span class="nv">$PWD</span>
</span></span></code></pre></div><p>Then, link the EPSG scripts in the directory where Apache <abbr title="Spatial Information System">SIS</abbr> looks for optional data:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> <span class="nv">$SIS_ROOT_DIR</span>/main
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> optional/src/org.apache.sis.referencing.epsg/main/org/apache/sis/referencing/factory/sql/epsg
</span></span><span class="line"><span class="cl">ln --symbolic <span class="nv">$EPSG_DIR</span>/LICENSE.* .
</span></span><span class="line"><span class="cl">ln --symbolic <span class="nv">$EPSG_DIR</span>/*.sql .
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> -
</span></span></code></pre></div><p>Then, build Apache <abbr title="Spatial Information System">SIS</abbr> with tests enabled.
This is sufficient for creating automatically the embedded Derby database in the <code>sis-embedded-data</code> artifact.
If the <code>SIS_DATA</code> environment variable is defined (which is recommended for better performance or for using datum shift grids),
it may be desirable to delete the database in that directory for forcing Apache <abbr title="Spatial Information System">SIS</abbr> to recreate it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Skip the following line if SIS_DATA is not used.</span>
</span></span><span class="line"><span class="cl">rm --recursive <span class="nv">$SIS_DATA</span>/Databases/SpatialMetadata
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> <span class="nv">$SIS_ROOT_DIR</span>/main
</span></span><span class="line"><span class="cl">gradle <span class="nb">test</span> --rerun
</span></span></code></pre></div><h2 id="postgres">Configure PostgreSQL   </h2>
<p>Apache <abbr title="Spatial Information System">SIS</abbr> is tested with Derby, HSQL and PostgreSQL databases.
Derby and HSQL are tested automatically using temporary databases in memory.
But testing on PostgreSQL requires the creation of a dedicated database on the developer platform.
The requirements are:</p>
<ul>
<li>PostgreSQL server running and listening to <code>localhost</code> on default port (5432).</li>
<li>A role with the same name than Unix user name of the developer running tests.</li>
<li>An empty database named <code>&quot;SpatialMetadataTest&quot;</code>.</li>
<li>Above-cited role can connect to <code>SpatialMetadataTest</code> database without password.</li>
<li><code>org.apache.sis.test.postgresql</code> Java property set to <code>true</code> or the
<code>SIS_TEST_OPTIONS</code> environment variable contains <code>postgresql</code>.</li>
</ul>
<p>The <code>SpatialMetadataTest</code> database should stay empty when not running tests,
because Apache <abbr title="Spatial Information System">SIS</abbr> always delete the temporary schema after tests completion,
regardless if the tests were successful or not.
The role and database can be created by connecting to the server:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">psql --username<span class="o">=</span>postgres
</span></span></code></pre></div><p>Then the role and database can be created by the following SQL instructions
(replace <code>my_unix_user_name</code> by your actual user name):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="n">my_unix_user_name</span><span class="w"> </span><span class="n">LOGIN</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="s2">&#34;SpatialMetadataTest&#34;</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my_unix_user_name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">COMMENT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="s2">&#34;SpatialMetadataTest&#34;</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="s1">&#39;For Apache SIS tests only.&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="k">connect</span><span class="w"> </span><span class="s2">&#34;SpatialMetadataTest&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="n">EXTENSION</span><span class="w"> </span><span class="n">postgis</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">\</span><span class="n">q</span><span class="w">
</span></span></span></code></pre></div><p>For opening access to that database without password, it may be necessary
to add following line (ignoring comment lines) in the <code>pg_hba.conf</code> file.
Location of this file is system-dependent, it may be <code>/var/lib/pgsql/data/</code>.
The following lines should be inserted <em>before</em> the lines for user <code>all</code>:</p>
<pre tabindex="0"><code># TYPE  DATABASE               USER                 ADDRESS         METHOD
host    SpatialMetadataTest    my_unix_user_name    127.0.0.1/32    trust
host    SpatialMetadataTest    my_unix_user_name    ::1/128         trust
</code></pre><p>The last step for allowing Apache <abbr title="Spatial Information System">SIS</abbr> to run tests on PostgreSQL is to set the
<code>org.apache.sis.test.postgresql</code> Java property or the
<code>SIS_TEST_OPTIONS</code> environment variable (see next section).
This requirement has been added for avoiding undesired interference with host.</p>
<h2 id="tests">Running extensive tests   </h2>
<p>A simple <code>gradle test</code> execution in the <code>main</code> directory
will build and test Apache <abbr title="Spatial Information System">SIS</abbr> with the default set of JUnit tests.
Some tests are skipped by default, either because they would have some effects outside
the <code>main</code> directory (for example writing in <code>SpatialMetadataTest</code> database on PostgreSQL),
or because those tests take a long time to execute.
For enabling all tests, use the following command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">SIS_TEST_OPTIONS</span><span class="o">=</span>extensive,postgresql
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> <span class="nv">$SIS_ROOT_DIR</span>/main
</span></span><span class="line"><span class="cl">gradle <span class="nb">test</span>
</span></span></code></pre></div><h2 id="branches">Switch to development branch   </h2>
<p>The source code repository contains <code>main</code>, <code>geoapi-3.1</code> and <code>geoapi-4.0</code> branches.
Apache <abbr title="Spatial Information System">SIS</abbr> releases are created from <code>main</code>, which depends on the latest GeoAPI version
released by the Open Geospatial Consortium (OGC), currently <a href="https://www.geoapi.org/3.0/index.html">GeoAPI 3.0.2</a>.
However, daily developments occur on the <code>geoapi-4.0</code> branch before to be merged (indirectly) to <code>main</code>.
Those branches exist in order to experiment early new API and technologies — since they may impact
the library design — while keeping the releases compatible with officially released API.
In summary:</p>
<ul>
<li>The <code>geoapi-4.0</code> branch implements interfaces defined in GeoAPI 4.0 snapshots.</li>
<li>The <code>geoapi-3.1</code> branch implements interfaces defined in <a href="https://www.geoapi.org/snapshot/index.html">GeoAPI 3.1 snapshots</a>.</li>
<li>The <code>main</code> implements interfaces defined by the <a href="https://www.geoapi.org/3.0/index.html">GeoAPI 3.0.2 stable release</a>.</li>
</ul>
<p>Developments on <code>geoapi-4.0</code> branch are merged to <code>geoapi-3.1</code> branch, which is then merged to <code>main</code>.
When commits reach <code>main</code> they become unmodifiable; the <code>git push --force</code> command is not allowed on that branch.
Contributors to Apache <abbr title="Spatial Information System">SIS</abbr> project should switch to the current development branch before submitting patches:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> <span class="nv">$SIS_ROOT_DIR</span>
</span></span><span class="line"><span class="cl">git checkout geoapi-4.0
</span></span></code></pre></div><p>Note that those <code>geoapi-xxx</code> branches may disappear or be replaced by something else
after <abbr title="Open Geospatial Consortium">OGC</abbr> releases the corresponding GeoAPI versions.</p>
<h1 id="resources">Managing resources  </h1>
<p>Resources are in the same <code>src</code> directories than Java source code.
Resources files are kept close to Java source files because they often need to be edited together.
All resource files are copied to the build directory, except those with the following extensions:</p>
<ul>
<li><code>tmp</code>, <code>bak</code>, <code>log</code> — because they are temporary files.</li>
<li><code>java</code>, <code>idl</code>       — because they are source files.</li>
<li><code>html</code>, <code>md</code>        — because they are documentation files.</li>
</ul>
<p>The <code>properties</code> files are handled in a special way.
Localized resources are provided in <code>*.properties</code> files as specified by the <code>java.util.Property­Resource­Bundle</code> standard class.
However, Apache <abbr title="Spatial Information System">SIS</abbr> does not use those resources files directly.
Instead <code>*.properties</code> files are transformed into binary files having the same filename but the <code>.utf</code> extension.
This conversion is done for efficiency,
for convenience (the compiler applies the <code>java.text.Message­Format</code> <em>doubled single quotes</em> rule itself),
and for compile-time safety.</p>
<p>In addition to generating the <code>*.utf</code> files, the resource compiler may modify the <code>*.java</code> files having the same name than the
resource files. For example, given a set of <code>Vocabulary*.properties</code> files (one for each supported language), the compiler will
generate the corresponding <code>Vocabulary*.utf</code> files, then look for a <code>Vocabulary.java</code> source file. If such source file is found
and contains a public static inner class named <code>Keys</code>, then the compiler will rewrite the constants declared in that inner class
with the list of keys found in the <code>Vocabulary*.properties</code> files.</p>
<p>Apache <abbr title="Spatial Information System">SIS</abbr> uses a plugin in <code>buildSrc/</code> for processing resources.
This plugin is used automatically by Gradle.</p>
<h1 id="history">History   </h1>
<p>The build system before Apache <abbr title="Spatial Information System">SIS</abbr> 1.4 was Maven.
Migration to Gradle was necessary for partial support of Module Source Hierarchy.
All developments and tags prior Apache <abbr title="Spatial Information System">SIS</abbr> 1.0 were done on a <a href="https://subversion.apache.org">Subversion</a> repository
and can be <a href="http://svn.apache.org/viewvc/sis/">browsed online</a>.
Tags for Apache <abbr title="Spatial Information System">SIS</abbr> versions 0.1 to 0.8 should be fetched from the <a href="https://svn.apache.org/repos/asf/sis/tags/">SVN repository</a>.
The development branches on that repository were named <code>JDK8</code>, <code>JDK7</code>, <code>JDK6</code> and <code>trunk</code>.</p>


          </article>
        </main>
        <footer>
          <div class="container">
            <p>Copyright &copy; 2013-2025 The Apache Software Foundation, Licensed under the
            <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.<br/>
            Apache SIS, Apache, the Apache feather logo are trademarks of The Apache Software Foundation.</p>
          </div>
        </footer>
      </div>
    </div>
  </body>
</html>
