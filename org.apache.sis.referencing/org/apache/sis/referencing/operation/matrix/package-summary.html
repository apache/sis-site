<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) on Tue Jan 27 17:52:37 CET 2026 -->
<title>org.apache.sis.referencing.operation.matrix (Apache SIS 1.6 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2026-01-27">
<meta name="description" content="declaration: module: org.apache.sis.referencing, package: org.apache.sis.referencing.operation.matrix">
<meta name="generator" content="javadoc/PackageWriter">
<meta name="keywords" content="org.apache.sis.referencing.operation.matrix package">
<link rel="stylesheet" type="text/css" href="../../../../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../resource-files/stylesheet.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../resource-files/sis.css">
<script type="text/javascript" src="../../../../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../new-list.html">New</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../search.html">Search</a></li>
<li><a href="../../../../../../../help-doc.html#package">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="../../../../../../module-summary.html">org.apache.sis.referencing</a></li>
<li><a href="package-summary.html" class="current-selection">org.apache.sis.referencing.operation.matrix</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents</div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a>
<ol class="toc-list">
<li><a href="#extended-floating-point-precision-heading" tabindex="0">Extended floating point precision</a></li>
<li><a href="#related-projects-heading" tabindex="0">Related projects</a></li>
</ol>
</li>
<li><a href="#related-package-summary" tabindex="0">Related Packages</a></li>
<li><a href="#class-summary" tabindex="0">Classes and Interfaces</a></li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<div class="header">
<h1 title="Package org.apache.sis.referencing.operation.matrix" class="title">Package org.apache.sis.referencing.operation.matrix</h1>
</div>
<hr>
<div class="horizontal-scroll">
<div class="package-signature">package <span class="element-name">org.apache.sis.referencing.operation.matrix</span></div>
<section class="package-description" id="package-description">
<div class="block">Matrix implementations for spatiotemporal referencing.
Matrices can be of arbitrary size, but the most common ones in the context of geospatial coordinate operations
are not greater than 5×5 (number of spatiotemporal dimensions + 1).
This package differs from other matrix packages by:

<ul>
  <li>The class specializations for such small matrices.</li>
  <li>Methods specific to coordinate systems support like
      <a href="Matrices.html#createTransform(org.opengis.geometry.Envelope,org.opengis.referencing.cs.AxisDirection%5B%5D,org.opengis.geometry.Envelope,org.opengis.referencing.cs.AxisDirection%5B%5D)"><code>Matrices​.create­Transform(…)</code></a>.</li>
  <li>Matrix inversions tolerant to <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Double.html#NaN" title="class or interface in java.lang" class="external-link"><code>Na­N</code></a> values and non-square matrix in some situations.</li>
  <li>Capability to store <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Number.html" title="class or interface in java.lang" class="external-link"><code>Number</code></a> instances for greater precision (depending on the number subtype).</li>
</ul>

<p>This package provides public implementations of small square matrices, with size ranging from 1×1 to 4×4.
Those implementations are convenient for working with Coordinate Reference Systems (CRS) of fixed dimensions.
If the number of CRS dimensions is fixed to 3,
then <i>affine transforms</i> between those CRS can be represented by 4×4 matrices,
and the <i>derivatives</i> of those transforms can be represented by 3×3 matrices.
When the number of dimensions is fixed at compile-time, matrix elements can be accessed
directly with the <var>m</var><sub><var>row</var> <var>column</var></sub> fields.</p>

<p><b>Example:</b> in the two dimensional case, an affine transform from a map projection (units in metres)
to the screen (units in pixels) can be performed by the following matrix multiplication:</p>

<div style="text-align:center">
<img src="doc-files/AffineTransform.png" alt="Matrix representation of an affine transform">
</div>

<h2 id="extended-floating-point-precision-heading">Extended floating point precision</h2>
This package uses extended floating point precision for most arithmetic operations like matrix multiplications and
inversions. SIS needs extended precision because <i>affine transforms</i> concatenations like conversion from
degrees to radians, followed by some operations, followed by conversion back from radians to degrees, are very frequent.
Without extended precision, we often obtain values like 0.99999… where we would expect an identity transform.
The usual workaround - namely comparing the floating point values with a small <var>epsilon</var> tolerance value -
is dangerous in this particular case because <i>datum shifts</i>, when expressed as a matrix from their
<a href="../../datum/BursaWolfParameters.html" title="class in org.apache.sis.referencing.datum">Bursa-Wolf parameters</a>, are very close to the
identity transform.

<p>The current implementation uses
<a href="https://en.wikipedia.org/wiki/Quadruple-precision_floating-point_format#Double-double_arithmetic">double-double
arithmetic</a>. However, this may change in any future SIS version.</p>

<h2 id="related-projects-heading">Related projects</h2>
This package is <strong>not</strong> designed for large matrices, and is rooted in
<code>org​.apache​.sis​.referencing</code> for making clearer that this is not a general-purpose library.
For computational intensive calculations, better guarantees on numerical stability, sparse matrices support
and more, consider using an dedicated library like <a href="http://mikiobraun.github.io/jblas">jblas</a> instead.

<p>The <a href="https://download.java.net/media/java3d/javadoc/1.5.2/javax/vecmath/package-summary.html">Vecmath</a>
library shares similar goals than <code>Matrix­SIS</code>.
Like SIS, Vecmath is optimized for small matrices of interest for 2D and 3D graphics.</p></div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.4</dd>
</dl>
</section>
</div>
<section class="summary">
<ul class="summary-list">
<li>
<div id="related-package-summary">
<div class="caption"><span>Related Packages</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Package</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><a href="../package-summary.html">org.apache.sis.referencing.operation</a></div>
<div class="col-last even-row-color">
<div class="block">Relationship between any two <a href="../../crs/AbstractCRS.html" title="class in org.apache.sis.referencing.crs">Coordinate Reference Systems</a> (CRS).</div>
</div>
<div class="col-first odd-row-color"><a href="../builder/package-summary.html">org.apache.sis.referencing.operation.builder</a></div>
<div class="col-last odd-row-color">
<div class="block">Helper classes for creating <a href="../transform/AbstractMathTransform.html" title="class in org.apache.sis.referencing.operation.transform">Math Transforms</a> from a set of points.</div>
</div>
<div class="col-first even-row-color"><a href="../transform/package-summary.html">org.apache.sis.referencing.operation.transform</a></div>
<div class="col-last even-row-color">
<div class="block">Conversions or transformations of multi-dimensional coordinate tuples.</div>
</div>
</div>
</div>
</li>
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button><button id="class-summary-tab5" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab5', 2)" class="table-tab">Exception Classes</button></div>
<div id="class-summary.tabpanel" role="tabpanel" aria-labelledby="class-summary-tab0">
<div class="summary-table two-column-summary">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="AffineTransforms2D.html" title="class in org.apache.sis.referencing.operation.matrix">AffineTransforms2D</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Bridge between <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/Matrix.html" title="interface in org.opengis.referencing.operation"><code>Matrix</code></a> and Java2D <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/geom/AffineTransform.html" title="class or interface in java.awt.geom" class="external-link"><code>Affine­Transform</code></a> instances.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="Matrices.html" title="class in org.apache.sis.referencing.operation.matrix">Matrices</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block"><a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/Matrix.html" title="interface in org.opengis.referencing.operation"><code>Matrix</code></a> factory methods and utilities.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="Matrix1.html" title="class in org.apache.sis.referencing.operation.matrix">Matrix1</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A matrix of fixed <a href="Matrix1.html#SIZE">1</a>×<a href="Matrix1.html#SIZE">1</a> size,
typically resulting from <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform1D.html" title="interface in org.opengis.referencing.operation"><code>Math­Transform1D</code></a> derivative computation.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="Matrix2.html" title="class in org.apache.sis.referencing.operation.matrix">Matrix2</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A matrix of fixed <a href="Matrix2.html#SIZE">2</a>×<a href="Matrix2.html#SIZE">2</a> size,
typically resulting from <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform2D.html" title="interface in org.opengis.referencing.operation"><code>Math­Transform2D</code></a> derivative computation.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="Matrix3.html" title="class in org.apache.sis.referencing.operation.matrix">Matrix3</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A matrix of fixed <a href="Matrix3.html#SIZE">3</a>×<a href="Matrix3.html#SIZE">3</a> size.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="Matrix4.html" title="class in org.apache.sis.referencing.operation.matrix">Matrix4</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A matrix of fixed <a href="Matrix4.html#SIZE">4</a>×<a href="Matrix4.html#SIZE">4</a> size, often used in datum shifts.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="MatrixSIS.html" title="class in org.apache.sis.referencing.operation.matrix">MatrixSIS</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/Matrix.html" title="interface in org.opengis.referencing.operation"><code>Matrix</code></a> able to perform some operations of interest to Spatial Information Systems (SIS).</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab5"><a href="MismatchedMatrixSizeException.html" title="class in org.apache.sis.referencing.operation.matrix">MismatchedMatrixSizeException</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab5">
<div class="block">Thrown when two matrices cannot be added or multiplied because the sizes do not match.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab5"><a href="NoninvertibleMatrixException.html" title="class in org.apache.sis.referencing.operation.matrix">NoninvertibleMatrixException</a></div>
<div class="col-last even-row-color class-summary class-summary-tab5">
<div class="block">Thrown when a matrix cannot be inverted.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab5"><a href="UnderdeterminedMatrixException.html" title="class in org.apache.sis.referencing.operation.matrix">UnderdeterminedMatrixException</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab5">
<div class="block">Thrown when a matrix cannot be determined because of unknown terms.</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
</div>
</body>
</html>
