<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) on Tue Jan 27 17:52:37 CET 2026 -->
<title>LinearTransformBuilder (Apache SIS 1.6 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2026-01-27">
<meta name="description" content="declaration: module: org.apache.sis.referencing, package: org.apache.sis.referencing.operation.builder, class: LinearTransformBuilder">
<meta name="generator" content="javadoc/ClassWriter">
<meta name="keywords" content="org.apache.sis.referencing.operation.builder.LinearTransformBuilder class">
<meta name="keywords" content="approximate()">
<meta name="keywords" content="getSourceDimensions()">
<meta name="keywords" content="getTargetDimensions()">
<meta name="keywords" content="getSourceEnvelope()">
<meta name="keywords" content="getTargetEnvelope()">
<meta name="keywords" content="setControlPoints()">
<meta name="keywords" content="getControlPoints()">
<meta name="keywords" content="setControlPoint()">
<meta name="keywords" content="getControlPoint()">
<meta name="keywords" content="addLinearizers()">
<meta name="keywords" content="create()">
<meta name="keywords" content="linearizer()">
<meta name="keywords" content="correlation()">
<meta name="keywords" content="toString()">
<link rel="stylesheet" type="text/css" href="../../../../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../resource-files/stylesheet.css">
<link rel="stylesheet" type="text/css" href="../../../../../../../resource-files/sis.css">
<script type="text/javascript" src="../../../../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/LinearTransformBuilder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../new-list.html">New</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../search.html">Search</a></li>
<li><a href="../../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="../../../../../../module-summary.html">org.apache.sis.referencing</a></li>
<li><a href="package-summary.html">org.apache.sis.referencing.operation.builder</a></li>
<li><a href="LinearTransformBuilder.html" class="current-selection">LinearTransformBuilder</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a>
<ol class="toc-list">
<li><a href="#linearizers-heading" tabindex="0">Linearizers</a></li>
</ol>
</li>
<li><a href="#constructor-summary" tabindex="0">Constructor Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#constructor-detail" tabindex="0">Constructor Details</a>
<ol class="toc-list">
<li><a href="#%3Cinit%3E()" tabindex="0">LinearTransformBuilder()</a></li>
<li><a href="#%3Cinit%3E(int...)" tabindex="0">LinearTransformBuilder(int...)</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#approximate(org.opengis.referencing.operation.MathTransform,org.opengis.geometry.Envelope)" tabindex="0">approximate(MathTransform, Envelope)</a></li>
<li><a href="#getSourceDimensions()" tabindex="0">getSourceDimensions()</a></li>
<li><a href="#getTargetDimensions()" tabindex="0">getTargetDimensions()</a></li>
<li><a href="#getSourceEnvelope()" tabindex="0">getSourceEnvelope()</a></li>
<li><a href="#getTargetEnvelope()" tabindex="0">getTargetEnvelope()</a></li>
<li><a href="#setControlPoints(org.opengis.referencing.operation.MathTransform)" tabindex="0">setControlPoints(MathTransform)</a></li>
<li><a href="#setControlPoints(java.util.Map)" tabindex="0">setControlPoints(Map)</a></li>
<li><a href="#getControlPoints()" tabindex="0">getControlPoints()</a></li>
<li><a href="#setControlPoint(int%5B%5D,double%5B%5D)" tabindex="0">setControlPoint(int[], double[])</a></li>
<li><a href="#getControlPoint(int%5B%5D)" tabindex="0">getControlPoint(int[])</a></li>
<li><a href="#addLinearizers(java.util.Map,int...)" tabindex="0">addLinearizers(Map, int...)</a></li>
<li><a href="#create(org.opengis.referencing.operation.MathTransformFactory)" tabindex="0">create(MathTransformFactory)</a></li>
<li><a href="#linearizer()" tabindex="0">linearizer()</a></li>
<li><a href="#correlation()" tabindex="0">correlation()</a></li>
<li><a href="#toString()" tabindex="0">toString()</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class LinearTransformBuilder" class="title">Class LinearTransformBuilder</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
<div class="inheritance"><a href="TransformBuilder.html" title="class in org.apache.sis.referencing.operation.builder">TransformBuilder</a>
<div class="inheritance">LinearTransformBuilder</div>
</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">LinearTransformBuilder</span>
<span class="extends-implements">extends <a href="TransformBuilder.html" title="class in org.apache.sis.referencing.operation.builder">TransformBuilder</a></span></div>
<div class="block">Creates an affine transform which will map approximately the given source positions to the given target positions.
In many cases, the <em>source</em> positions are grid indices and the <em>target</em> positions are geographic or
projected coordinates, but this is not mandatory. If the source positions are known to be grid indices,
then a builder created by the <a href="#%3Cinit%3E(int...)"><code>Linear­Transform­Builder(int...)</code></a> constructor will be more efficient.
Otherwise a builder created by the <a href="#%3Cinit%3E()"><code>Linear­Transform­Builder()</code></a> constructor will be able to handle
randomly distributed coordinates.

<p>Builders are not thread-safe. Builders can be used only once;
points cannot be added or modified after <a href="#create(org.opengis.referencing.operation.MathTransformFactory)"><code>create(Math­Transform­Factory)</code></a> has been invoked.
The transform coefficients are determined using a <i>least squares</i> estimation method,
with the assumption that source positions are exact and all the uncertainty is in the target positions.</p>

<h2 id="linearizers-heading">Linearizers</h2>
Consider the following situation (commonly found with <a href="../../../../../../../org.apache.sis.storage.netcdf/org/apache/sis/storage/netcdf/package-summary.html">netCDF files</a>):
the <i>sources</i> coordinates are pixel indices and the <i>targets</i> are (longitude, latitude) coordinates,
but we suspect that the <i>sources to targets</i> transform is some undetermined map projection, maybe Mercator.
A linear approximation between those coordinates will give poor results; the results would be much better if all
(longitude, latitude) coordinates were converted to the right projection first. However, that map projection may
not be known, but we can try to guess it by trials-and-errors using a set of plausible projections.
That set can be specified by <a href="#addLinearizers(java.util.Map,int...)"><code>add­Linearizers(Map, int...)</code></a>.
If the <a href="#create(org.opengis.referencing.operation.MathTransformFactory)"><code>create(Math­Transform­Factory)</code></a> method finds that one of the specified projections seems a good fit,
it will automatically convert all target coordinates to that projection.
That selected projection is given by <a href="#linearizer()"><code>linearizer()</code></a>.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.5</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="LocalizationGridBuilder.html" title="class in org.apache.sis.referencing.operation.builder"><code>Localization­Grid­Builder</code></a></li>
<li><a href="../transform/LinearTransform.html" title="interface in org.apache.sis.referencing.operation.transform"><code>Linear­Transform</code></a></li>
<li><a href="../../../../../../../org.apache.sis.util/org/apache/sis/math/Line.html" title="class in org.apache.sis.math"><code>Line</code></a></li>
<li><a href="../../../../../../../org.apache.sis.util/org/apache/sis/math/Plane.html" title="class in org.apache.sis.math"><code>Plane</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">Linear­Transform­Builder</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Creates a new linear transform builder for randomly distributed positions.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(int...)" class="member-name-link">Linear­Transform­Builder</a><wbr>(int...&nbsp;grid­Size)</code></div>
<div class="col-last odd-row-color">
<div class="block">Creates a new linear transform builder for source positions distributed on a regular grid.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addLinearizers(java.util.Map,int...)" class="member-name-link">add­Linearizers</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>, <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html" title="interface in org.opengis.referencing.operation">Math­Transform</a>&gt;&nbsp;projections,
 int...&nbsp;proj­To­Grid)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds transforms to potentially apply on target control points before to compute the linear transform.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../transform/LinearTransform.html" title="interface in org.apache.sis.referencing.operation.transform">Linear­Transform</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#approximate(org.opengis.referencing.operation.MathTransform,org.opengis.geometry.Envelope)" class="member-name-link">approximate</a><wbr>(<a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html" title="interface in org.opengis.referencing.operation">Math­Transform</a>&nbsp;grid­To­CRS,
 <a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/Envelope.html" title="interface in org.opengis.geometry">Envelope</a>&nbsp;domain)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Returns a linear approximation of the given transform for the specified domain.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#correlation()" class="member-name-link">correlation</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the Pearson correlation coefficients of the transform created by <a href="#create(org.opengis.referencing.operation.MathTransformFactory)"><code>create(…)</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../transform/LinearTransform.html" title="interface in org.apache.sis.referencing.operation.transform">Linear­Transform</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#create(org.opengis.referencing.operation.MathTransformFactory)" class="member-name-link">create</a><wbr>(<a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransformFactory.html" title="interface in org.opengis.referencing.operation">Math­Transform­Factory</a>&nbsp;factory)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates a linear transform approximation from the source positions to the target positions.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>double[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getControlPoint(int%5B%5D)" class="member-name-link">get­Control­Point</a><wbr>(int[]&nbsp;source)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a single target coordinate for the given source coordinate, or <code>null</code> if none.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a><wbr>&lt;<a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/DirectPosition.html" title="interface in org.opengis.geometry">Direct­Position</a>, <a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/DirectPosition.html" title="interface in org.opengis.geometry">Direct­Position</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getControlPoints()" class="member-name-link">get­Control­Points</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns all control points as a map.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSourceDimensions()" class="member-name-link">get­Source­Dimensions</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the number of dimensions in source positions.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/Envelope.html" title="interface in org.opengis.geometry">Envelope</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSourceEnvelope()" class="member-name-link">get­Source­Envelope</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the envelope of source points (<em>keys</em> of the map returned by <a href="#getControlPoints()"><code>get­Control­Points()</code></a>).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTargetDimensions()" class="member-name-link">get­Target­Dimensions</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the number of dimensions in target positions.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/Envelope.html" title="interface in org.opengis.geometry">Envelope</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTargetEnvelope()" class="member-name-link">get­Target­Envelope</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the envelope of target points (<em>values</em> of the map returned by <a href="#getControlPoints()"><code>get­Control­Points()</code></a>).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.Entry.html" title="class or interface in java.util" class="external-link">Map​.Entry</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>, <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html" title="interface in org.opengis.referencing.operation">Math­Transform</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#linearizer()" class="member-name-link">linearizer</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If target coordinates have been projected to another space, returns that projection.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setControlPoint(int%5B%5D,double%5B%5D)" class="member-name-link">set­Control­Point</a><wbr>(int[]&nbsp;source,
 double[]&nbsp;target)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets a single matching control point pair.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setControlPoints(java.util.Map)" class="member-name-link">set­Control­Points</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;? extends <a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/coordinate/Position.html" title="interface in org.opengis.geometry.coordinate">Position</a>, ? extends <a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/coordinate/Position.html" title="interface in org.opengis.geometry.coordinate">Position</a>&gt;&nbsp;source­To­Target)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets all control point (source, target) pairs, overwriting any previous setting.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setControlPoints(org.opengis.referencing.operation.MathTransform)" class="member-name-link">set­Control­Points</a><wbr>(<a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html" title="interface in org.opengis.referencing.operation">Math­Transform</a>&nbsp;grid­To­CRS)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Sets all control point (source, target) pairs, overwriting any previous setting.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">to­String</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a string representation of this builder for debugging purpose.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-Object">Methods inherited from class&nbsp;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#method-summary" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">get­Class</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hash­Code</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notify­All</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>LinearTransformBuilder</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">LinearTransformBuilder</span>()</div>
<div class="block">Creates a new linear transform builder for randomly distributed positions.

<h4 id="performance-note-heading">Performance note</h4>
If the source coordinates are grid indices, then
the <a href="#%3Cinit%3E(int...)"><code>Linear­Transform­Builder(int...)</code></a> constructor will create a more efficient builder.</div>
</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(int...)">
<h3>LinearTransformBuilder</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">LinearTransformBuilder</span><wbr><span class="parameters">(int...&nbsp;gridSize)</span></div>
<div class="block">Creates a new linear transform builder for source positions distributed on a regular grid.
This constructor notifies <code>Linear­Transform­Builder</code> that coordinate values of all source positions will
be integers in the [0 … <code>grid­Size[0]</code>-1] range for the first dimension (typically column indices),
in the [0 … <code>grid­Size[1]</code>-1] range for the second dimension (typically row indices), <i>etc.</i>
The dimension of all source positions is the length of the given <code>grid­Size</code> array.

<p>An empty array is equivalent to invoking the no-argument constructor,
i.e. no restriction is put on the source coordinates.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>grid­Size</code> - the number of integer coordinate values in each grid dimension.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">Illegal­Argument­Exception</a></code> - if a grid size is not strictly positive, or if the product
        of all values (∏<code>grid­Size</code>) is greater than <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html#MAX_VALUE" title="class or interface in java.lang" class="external-link"><code>Integer​.MAX_VALUE</code></a>.</dd>
<dt>Since:</dt>
<dd>0.8</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="approximate(org.opengis.referencing.operation.MathTransform,org.opengis.geometry.Envelope)">
<h3>approximate</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../transform/LinearTransform.html" title="interface in org.apache.sis.referencing.operation.transform">LinearTransform</a></span>&nbsp;<span class="element-name">approximate</span><wbr><span class="parameters">(<a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html" title="interface in org.opengis.referencing.operation">MathTransform</a>&nbsp;gridToCRS,
 <a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/Envelope.html" title="interface in org.opengis.geometry">Envelope</a>&nbsp;domain)</span>
                                   throws <span class="exceptions"><a href="../../../../../../../org.opengis.geoapi/org/opengis/util/FactoryException.html" title="class in org.opengis.util">FactoryException</a></span></div>
<div class="block">Returns a linear approximation of the given transform for the specified domain.
The source positions are integer coordinates included in the given envelope.
The target positions are the results of transforming source coordinates with
the given <code>grid­To­CRS</code> transform.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>grid­To­CRS</code> - the transform from source coordinates (grid indices) to target coordinates.</dd>
<dd><code>domain</code> - domain of integer source coordinates for which to get a linear approximation.
                   Both lower and upper coordinate values are <em>inclusive</em>.</dd>
<dt>Returns:</dt>
<dd>a linear approximation of given transform for the specified domain.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../../../../org.opengis.geoapi/org/opengis/util/FactoryException.html" title="class in org.opengis.util">Factory­Exception</a></code> - if the transform approximation cannot be computed.</dd>
<dt>Since:</dt>
<dd>1.1</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#setControlPoints(org.opengis.referencing.operation.MathTransform)"><code>set­Control­Points(Math­Transform)</code></a></li>
<li><a href="../../../../../../../org.apache.sis.feature/org/apache/sis/coverage/grid/DomainLinearizer.html" title="class in org.apache.sis.coverage.grid"><code>Domain­Linearizer</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getSourceDimensions()">
<h3>getSourceDimensions</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getSourceDimensions</span>()</div>
<div class="block">Returns the number of dimensions in source positions. This is the length of the <code>source</code> array given in argument
to <a href="#getControlPoint(int%5B%5D)"><code>get</code></a>/<a href="#setControlPoint(int%5B%5D,double%5B%5D)"><code>set­Control­Point(int[], …)</code></a> methods.
This is also the number of dimensions of the <a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/DirectPosition.html" title="interface in org.opengis.geometry"><code>Direct­Position</code></a> <em>keys</em> in the <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link"><code>Map</code></a> exchanged by
<a href="#getControlPoints()"><code>get</code></a>/<a href="#setControlPoints(java.util.Map)"><code>set­Control­Points(Map)</code></a> methods.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the dimension of source points.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">Illegal­State­Exception</a></code> - if the number of source dimensions is not yet known.</dd>
<dt>Since:</dt>
<dd>0.8</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html#getSourceDimensions()"><code>Math­Transform​.get­Source­Dimensions()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getTargetDimensions()">
<h3>getTargetDimensions</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getTargetDimensions</span>()</div>
<div class="block">Returns the number of dimensions in target positions. This is the length of the <code>target</code> array exchanged by
<a href="#getControlPoint(int%5B%5D)"><code>get</code></a>/<a href="#setControlPoint(int%5B%5D,double%5B%5D)"><code>set­Control­Point(…, double[])</code></a> methods.
This is also the number of dimensions of the <a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/DirectPosition.html" title="interface in org.opengis.geometry"><code>Direct­Position</code></a> <em>values</em> in the <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link"><code>Map</code></a> exchanged by
<a href="#getControlPoints()"><code>get</code></a>/<a href="#setControlPoints(java.util.Map)"><code>set­Control­Points(Map)</code></a> methods.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the dimension of target points.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">Illegal­State­Exception</a></code> - if the number of target dimensions is not yet known.</dd>
<dt>Since:</dt>
<dd>0.8</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html#getTargetDimensions()"><code>Math­Transform​.get­Target­Dimensions()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getSourceEnvelope()">
<h3>getSourceEnvelope</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/Envelope.html" title="interface in org.opengis.geometry">Envelope</a></span>&nbsp;<span class="element-name">getSourceEnvelope</span>()</div>
<div class="block">Returns the envelope of source points (<em>keys</em> of the map returned by <a href="#getControlPoints()"><code>get­Control­Points()</code></a>).
The number of dimensions is equal to <a href="#getSourceDimensions()"><code>get­Source­Dimensions()</code></a>.
This method returns the known minimum and maximum values (inclusive) for each dimension,
<strong>not</strong> expanded to encompass full cell surfaces. In other words, the returned envelope encompasses only
<a href="../../../../../../../org.apache.sis.feature/org/apache/sis/coverage/grid/PixelInCell.html#CELL_CENTER">cell centers</a>.

<p>If a grid size was <a href="#%3Cinit%3E(int...)"><code>specified at construction time</code></a>,
then those minimums and maximums are inferred from the grid size and are always integer values.
Otherwise, the minimums and maximums are extracted from the control points and may be any floating point values.
In any cases, the lower and upper values are inclusive.</p></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the envelope of source points (cell centers), inclusive.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">Illegal­State­Exception</a></code> - if the source points are not yet known.</dd>
<dt>Since:</dt>
<dd>1.0</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getTargetEnvelope()">
<h3>getTargetEnvelope</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/Envelope.html" title="interface in org.opengis.geometry">Envelope</a></span>&nbsp;<span class="element-name">getTargetEnvelope</span>()</div>
<div class="block">Returns the envelope of target points (<em>values</em> of the map returned by <a href="#getControlPoints()"><code>get­Control­Points()</code></a>).
The number of dimensions is equal to <a href="#getTargetDimensions()"><code>get­Target­Dimensions()</code></a>. The lower and upper values are inclusive.
If a <a href="#linearizer()">linearizer has been applied</a>, then coordinates of the returned envelope
are projected by that linearizer.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the envelope of target points.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">Illegal­State­Exception</a></code> - if the target points are not yet known.</dd>
<dt>Since:</dt>
<dd>1.0</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="setControlPoints(org.opengis.referencing.operation.MathTransform)">
<h3>setControlPoints</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setControlPoints</span><wbr><span class="parameters">(<a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html" title="interface in org.opengis.referencing.operation">MathTransform</a>&nbsp;gridToCRS)</span>
                      throws <span class="exceptions"><a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/TransformException.html" title="class in org.opengis.referencing.operation">TransformException</a></span></div>
<div class="block">Sets all control point (source, target) pairs, overwriting any previous setting.
The source positions are all integer coordinates in a rectangle from (0, 0, …) inclusive
to <code>grid­Size</code> exclusive where <code>grid­Size</code> is an <code>int[]</code> array specified
<a href="#%3Cinit%3E(int...)">at construction time</a>. The target positions are
the results of transforming all source coordinates with the given <code>grid­To­CRS</code> transform.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>grid­To­CRS</code> - the transform from source coordinates (grid indices) to target coordinates.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/TransformException.html" title="class in org.opengis.referencing.operation">Transform­Exception</a></code> - if a coordinate value cannot be transformed.</dd>
<dt>Since:</dt>
<dd>1.1</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#approximate(org.opengis.referencing.operation.MathTransform,org.opengis.geometry.Envelope)"><code>approximate(Math­Transform, Envelope)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="setControlPoints(java.util.Map)">
<h3>setControlPoints</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setControlPoints</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;? extends <a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/coordinate/Position.html" title="interface in org.opengis.geometry.coordinate">Position</a>, ? extends <a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/coordinate/Position.html" title="interface in org.opengis.geometry.coordinate">Position</a>&gt;&nbsp;sourceToTarget)</span>
                      throws <span class="exceptions"><a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/MismatchedDimensionException.html" title="class in org.opengis.geometry">MismatchedDimensionException</a></span></div>
<div class="block">Sets all control point (source, target) pairs, overwriting any previous setting.
The source positions are the keys in given map, and the target positions are the associated values.
The map should not contain two entries with the same source position.
Coordinate reference systems are ignored.
Null positions are silently ignored.
Positions with NaN or infinite coordinates cause an exception to be thrown.

<p>All source positions shall have the same number of dimensions (the <i>source dimension</i>),
and all target positions shall have the same number of dimensions (the <i>target dimension</i>).
However, the source dimension does not need to be the same as the target dimension.
Apache SIS currently supports only one- or two-dimensional source positions,
together with arbitrary target dimension.</p>

<p>If this builder has been created with the <a href="#%3Cinit%3E(int...)"><code>Linear­Transform­Builder(int...)</code></a> constructor,
then the coordinate values of all source positions shall be integers in the [0 … <code>grid­Size[0]</code>-1]
range for the first dimension (typically column indices), in the [0 … <code>grid­Size[1]</code>-1] range for
the second dimension (typically row indices), <i>etc</i>. This constraint does not apply for builders
created with the <a href="#%3Cinit%3E()"><code>Linear­Transform­Builder()</code></a> constructor.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>source­To­Target</code> - a map of source positions to target positions.
        Source positions are assumed precise and target positions are assumed uncertain.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">Illegal­State­Exception</a></code> - if <a href="#create(org.opengis.referencing.operation.MathTransformFactory)"><code>create(…)</code></a> has already been invoked.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">Illegal­Argument­Exception</a></code> - if the given positions contain NaN or infinite coordinate values.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">Illegal­Argument­Exception</a></code> - if this builder has been <a href="#%3Cinit%3E(int...)">created for a grid</a> but some source coordinates are not indices in that grid.</dd>
<dd><code><a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/MismatchedDimensionException.html" title="class in org.opengis.geometry">Mismatched­Dimension­Exception</a></code> - if some positions do not have the expected number of dimensions.</dd>
<dt>Since:</dt>
<dd>0.8</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getControlPoints()">
<h3>getControlPoints</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/DirectPosition.html" title="interface in org.opengis.geometry">DirectPosition</a>, <a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/DirectPosition.html" title="interface in org.opengis.geometry">DirectPosition</a>&gt;</span>&nbsp;<span class="element-name">getControlPoints</span>()</div>
<div class="block">Returns all control points as a map. Values are source coordinates and keys are target coordinates.
The map is unmodifiable and is guaranteed to contain only non-null keys and values.
The map is a view: changes in this builder are immediately reflected in the returned map.

<p>If <a href="#linearizer()"><code>linearizer()</code></a> returns a non-empty value,
then the values in the returned map are projected using that linearizer.
This may happen only after <a href="#create(org.opengis.referencing.operation.MathTransformFactory)"><code>create(…)</code></a> has been invoked.</p></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>all control points in this builder.</dd>
<dt>Since:</dt>
<dd>1.0</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="setControlPoint(int[],double[])">
<h3>setControlPoint</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setControlPoint</span><wbr><span class="parameters">(int[]&nbsp;source,
 double[]&nbsp;target)</span></div>
<div class="block">Sets a single matching control point pair. Source position is assumed precise and target position is assumed uncertain.
If the given source position was already associated with another target position, then the old target position is discarded.

<h4 id="performance-note-heading1">Performance note</h4>
Current implementation is efficient for builders <a href="#%3Cinit%3E(int...)">created for a grid</a>
but inefficient for builders <a href="#%3Cinit%3E()">created for randomly distributed points</a>.
In the latter case, the <a href="#setControlPoints(java.util.Map)"><code>set­Control­Points(Map)</code></a> method is a more efficient alternative.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>source</code> - the source coordinates. If this builder has been created with the <a href="#%3Cinit%3E(int...)"><code>Linear­Transform­Builder(int...)</code></a> constructor,
                then for every index <var>i</var> the <code>source[i]</code> value shall be in the [0 … <code>grid­Size[i]</code>-1] range inclusive.
                If this builder has been created with the <a href="#%3Cinit%3E()"><code>Linear­Transform­Builder()</code></a> constructor, then no constraint apply.</dd>
<dd><code>target</code> - the target coordinates, assumed uncertain.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">Illegal­State­Exception</a></code> - if <a href="#create(org.opengis.referencing.operation.MathTransformFactory)"><code>create(…)</code></a> has already been invoked.</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">Illegal­Argument­Exception</a></code> - if this builder has been <a href="#%3Cinit%3E(int...)">created for a grid</a>
        but some source coordinates are out of index range, or if <code>target</code> contains NaN of infinite numbers.</dd>
<dd><code><a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/MismatchedDimensionException.html" title="class in org.opengis.geometry">Mismatched­Dimension­Exception</a></code> - if the source or target position does not have the expected number of dimensions.</dd>
<dt>Since:</dt>
<dd>0.8</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getControlPoint(int[])">
<h3>getControlPoint</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double[]</span>&nbsp;<span class="element-name">getControlPoint</span><wbr><span class="parameters">(int[]&nbsp;source)</span></div>
<div class="block">Returns a single target coordinate for the given source coordinate, or <code>null</code> if none.
This method can be used for retrieving points set by previous calls to
<a href="#setControlPoint(int%5B%5D,double%5B%5D)"><code>set­Control­Point(int[], double[])</code></a> or <a href="#setControlPoints(java.util.Map)"><code>set­Control­Points(Map)</code></a>.

<p>If <a href="#linearizer()"><code>linearizer()</code></a> returns a non-empty value, then the returned values are projected using that linearizer.
This may happen only if this method is invoked after <a href="#create(org.opengis.referencing.operation.MathTransformFactory)"><code>create(…)</code></a>.</p>

<h4 id="performance-note-heading2">Performance note</h4>
Current implementation is efficient for builders <a href="#%3Cinit%3E(int...)">created for a grid</a>
but inefficient for builders <a href="#%3Cinit%3E()">created for randomly distributed points</a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>source</code> - the source coordinates. If this builder has been created with the <a href="#%3Cinit%3E(int...)"><code>Linear­Transform­Builder(int...)</code></a> constructor,
                then for every index <var>i</var> the <code>source[i]</code> value shall be in the [0 … <code>grid­Size[i]</code>-1] range inclusive.
                If this builder has been created with the <a href="#%3Cinit%3E()"><code>Linear­Transform­Builder()</code></a> constructor, then no constraint apply.</dd>
<dt>Returns:</dt>
<dd>the target coordinates associated to the given source, or <code>null</code> if none.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">Illegal­Argument­Exception</a></code> - if this builder has been <a href="#%3Cinit%3E(int...)">created for a grid</a>
        but some source coordinates are out of index range.</dd>
<dd><code><a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/MismatchedDimensionException.html" title="class in org.opengis.geometry">Mismatched­Dimension­Exception</a></code> - if the source position does not have the expected number of dimensions.</dd>
<dt>Since:</dt>
<dd>0.8</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="addLinearizers(java.util.Map,int...)">
<h3>addLinearizers</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addLinearizers</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>, <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html" title="interface in org.opengis.referencing.operation">MathTransform</a>&gt;&nbsp;projections,
 int...&nbsp;projToGrid)</span></div>
<div class="block">Adds transforms to potentially apply on target control points before to compute the linear transform.
This method can be invoked when the <i>source to target</i> transform would possibly be more
linear if <i>target</i> was another space than the <a href="#getTargetEnvelope()">current one</a>.
If linearizers have been specified, then the <a href="#create(org.opengis.referencing.operation.MathTransformFactory)"><code>create(Math­Transform­Factory)</code></a> method will try to
apply each transform on target coordinates and check which one get the best
<a href="#correlation()">correlation</a> coefficients.

<p>Exactly one of the specified transforms will be selected. If applying no transform is an acceptable solution,
then an <a href="../transform/MathTransforms.html#identity(int)">identity transform</a>
should be included in the given <code>projections</code> map. The transform selected by <code>Linear­Transform­Builder</code>
will be given by <a href="#linearizer()"><code>linearizer()</code></a>.</p>

<p>Linearizers are specified as a collection of <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html" title="interface in org.opengis.referencing.operation"><code>Math­Transform</code></a>s from current <a href="#getTargetEnvelope()">target coordinates</a> to some other spaces where <i>sources to new targets</i> transforms may be more linear.
Keys in the map are arbitrary identifiers.
Values in the map should be non-linear transforms; <a href="../transform/LinearTransform.html" title="interface in org.apache.sis.referencing.operation.transform"><code>Linear­Transform</code></a>s (other than identity)
should be avoided because they will consume processing power for no correlation improvement.</p>

<h4 id="error-handling-heading">Error handling</h4>
If a <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/TransformException.html" title="class in org.opengis.referencing.operation"><code>Transform­Exception</code></a> occurred or if some transform results
were NaN or infinite, then the <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html" title="interface in org.opengis.referencing.operation"><code>Math­Transform</code></a> that failed will be ignored. If all transforms fail,
then a <a href="../../../../../../../org.opengis.geoapi/org/opengis/util/FactoryException.html" title="class in org.opengis.util"><code>Factory­Exception</code></a> will be thrown by the <code>create(…)</code> method.

<h4 id="dimensions-mapping-heading">Dimensions mapping</h4>
The <code>proj­To­Grid</code> argument maps <code>projections</code> dimensions to target dimensions of this builder.
For example if <code>proj­To­Grid</code> array is <code>{2,1}</code>, then coordinate values in target dimensions 2 and 1
of this grid will be used as source coordinates in dimensions 0 and 1 respectively for all given projections.
Likewise, the projection results in dimensions 0 and 1 of all projections will be stored in target dimensions
2 and 1 respectively of this grid.

<p>The <code>proj­To­Grid</code> argument can be omitted or null, in which case {0, 1, 2 …
<a href="#getTargetDimensions()"><code>get­Target­Dimensions()</code></a> - 1} is assumed. All given <code>projections</code> shall have
a number of source and target dimensions equals to the length of the <code>proj­To­Grid</code> array.
It is possible to invoke this method many times with different <code>proj­To­Grid</code> argument values.</p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>projections</code> - projections from current target coordinates to other spaces which may result in more linear transforms.</dd>
<dd><code>proj­To­Grid</code> - the target dimensions to project, or null or omitted for projecting all target dimensions in same order.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">Illegal­State­Exception</a></code> - if <a href="#create(org.opengis.referencing.operation.MathTransformFactory)"><code>create(…)</code></a> has already been invoked.</dd>
<dd><code><a href="../../../../../../../org.opengis.geoapi/org/opengis/geometry/MismatchedDimensionException.html" title="class in org.opengis.geometry">Mismatched­Dimension­Exception</a></code> - if a projection does not have the expected number of dimensions.</dd>
<dt>Since:</dt>
<dd>1.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#linearizer()"><code>linearizer()</code></a></li>
<li><a href="#correlation()"><code>correlation()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="create(org.opengis.referencing.operation.MathTransformFactory)">
<h3>create</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../transform/LinearTransform.html" title="interface in org.apache.sis.referencing.operation.transform">LinearTransform</a></span>&nbsp;<span class="element-name">create</span><wbr><span class="parameters">(<a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransformFactory.html" title="interface in org.opengis.referencing.operation">MathTransformFactory</a>&nbsp;factory)</span>
                       throws <span class="exceptions"><a href="../../../../../../../org.opengis.geoapi/org/opengis/util/FactoryException.html" title="class in org.opengis.util">FactoryException</a></span></div>
<div class="block">Creates a linear transform approximation from the source positions to the target positions.
This method assumes that source positions are precise and that all uncertainties are in target positions.
If <a href="#addLinearizers(java.util.Map,int...)">linearizers have been specified</a>, then this method will project all target
coordinates using one of those linearizers in order to get a more linear transform.
If such projection is applied, then <a href="#linearizer()"><code>linearizer()</code></a> will return a non-empty value after this method call.

<p>If this method is invoked more than once, the previously created transform instance is returned.</p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="TransformBuilder.html#create(org.opengis.referencing.operation.MathTransformFactory)">create</a></code>&nbsp;in class&nbsp;<code><a href="TransformBuilder.html" title="class in org.apache.sis.referencing.operation.builder">Transform­Builder</a></code></dd>
<dt>Parameters:</dt>
<dd><code>factory</code> - the factory to use for creating the transform, or <code>null</code> for the default factory.
                 The <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransformFactory.html#createAffineTransform(org.opengis.referencing.operation.Matrix)"><code>Math­Transform­Factory​.create­Affine­Transform(Matrix)</code></a> method of that factory
                 shall return <a href="../transform/LinearTransform.html" title="interface in org.apache.sis.referencing.operation.transform"><code>Linear­Transform</code></a> instances.</dd>
<dt>Returns:</dt>
<dd>the fitted linear transform.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../../../../../org.opengis.geoapi/org/opengis/util/FactoryException.html" title="class in org.opengis.util">Factory­Exception</a></code> - if the transform cannot be created,
        for example because the source or target points have not be specified.</dd>
<dt>Since:</dt>
<dd>0.8</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="linearizer()">
<h3>linearizer</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.Entry.html" title="class or interface in java.util" class="external-link">Map.Entry</a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>, <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html" title="interface in org.opengis.referencing.operation">MathTransform</a>&gt;&gt;</span>&nbsp;<span class="element-name">linearizer</span>()</div>
<div class="block">If target coordinates have been projected to another space, returns that projection.
This method returns a non-empty value if <a href="#addLinearizers(java.util.Map,int...)"><code>add­Linearizers(Map, int...)</code></a> has been
invoked with a non-empty map, followed by a <a href="#create(org.opengis.referencing.operation.MathTransformFactory)"><code>create(Math­Transform­Factory)</code></a> call.
In such case, <code>Linear­Transform­Builder</code> selects a linearizer identified by the returned
<var>key</var> - <var>value</var> entry. The entry key is one of the keys of the maps given
to <code>add­Linearizers(…)</code>. The entry value is the associated <code>Math­Transform</code>,
possibly modified as described in the <i>axis order</i> section below.

<p>The envelope returned by <a href="#getTargetEnvelope()"><code>get­Target­Envelope()</code></a> and all control points
returned by <a href="#getControlPoint(int%5B%5D)"><code>get­Control­Point(int[])</code></a> are projected by the selected transform.
Consequently, if the target coordinates of original control points are desired,
then the transform returned by <code>create(…)</code> needs to be concatenated with
the <a href="../../../../../../../org.opengis.geoapi/org/opengis/referencing/operation/MathTransform.html#inverse()">inverse</a> of the transform returned by
this <code>linearizer()</code> method.</p>

<h4 id="axis-order-heading">Axis order</h4>
The source coordinates expected by the returned transform are the <a href="#getControlPoint(int%5B%5D)">control points target coordinates</a>. The returned transform will contain an operation step performing
axis filtering and swapping implied by the <code>proj­To­Grid</code> argument that was given to the
<code><a href="#addLinearizers(java.util.Map,int...)">add­Linearizers</a>(…, proj­To­Grid)}</code> method.
Consequently, if the <code>proj­To­Grid</code> argument was not an arithmetic progression,
then the transform returned by this method will not be one of the instances given to
<code>add­Linearizers(…)</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the projection applied on target coordinates before to compute a linear transform.</dd>
<dt>Since:</dt>
<dd>1.1</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="correlation()">
<h3>correlation</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double[]</span>&nbsp;<span class="element-name">correlation</span>()</div>
<div class="block">Returns the Pearson correlation coefficients of the transform created by <a href="#create(org.opengis.referencing.operation.MathTransformFactory)"><code>create(…)</code></a>.
The closer those coefficients are to +1 or -1, the better the fit.
This method returns <code>null</code> if <code>create(…)</code> has not yet been invoked.
If non-null, the array length is equal to the number of target dimensions.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>estimation of Pearson correlation coefficients for each target dimension,
        or <code>null</code> if <code>create(…)</code> has not been invoked yet.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<div class="block">Returns a string representation of this builder for debugging purpose.
Current implementation shows the following information:

<ul>
  <li>Number of points.</li>
  <li>Linearizers and their correlation coefficients (if available).</li>
  <li>The linear transform (if already computed).</li>
</ul>

The string representation may change in any future version.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">to­String</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
<dt>Returns:</dt>
<dd>a string representation of this builder.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</body>
</html>
